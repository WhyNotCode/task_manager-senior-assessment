<%# Bootstrap alerts for form errors %>
<% if task.errors.any? %>
  <div class="alert alert-danger mb-4">
    <h5 class="alert-heading">
      <i class="bi bi-exclamation-triangle"></i>
      <%= pluralize(task.errors.count, "error") %> prohibited this task from being saved:
    </h5>
    <ul class="mb-0">
      <% task.errors.each do |error| %>
        <li><%= error.full_message %></li>
      <% end %>
    </ul>
  </div>
<% end %>



<%= form_with(model: task) do |form| %>
  <div class="mb-3">
    <%= form.label :title, class: "form-label fw-bold" %>
    <%= form.text_field :title, 
        class: "form-control #{'is-invalid' if task.errors[:title].any?}",
        placeholder: "Enter task title",
        required: true %>
    <% if task.errors[:title].any? %>
      <div class="invalid-feedback d-block">
        <%= task.errors[:title].to_sentence %>
      </div>
    <% end %>
  </div>


  <div class="mb-3">
    <%= form.label :description, class: "form-label fw-bold" %>
    <%= form.text_area :description, 
        class: "form-control #{'is-invalid' if task.errors[:description].any?}",
        rows: 4,
        placeholder: "Describe your task (optional)" %>
    <% if task.errors[:description].any? %>
      <div class="invalid-feedback d-block">
        <%= task.errors[:description].to_sentence %>
      </div>
    <% end %>
  </div>


  <% if form.object.persisted? %>
    <div class="mb-4">
      <div class="form-check form-switch">
        <%= form.check_box :completed, class: "form-check-input" %>
        <%= form.label :completed, "Mark as completed", class: "form-check-label" %>
      </div>
    </div>
  <% end %>

  

  <div class="mt-4">
    <%= form.submit class: "btn btn-primary px-4", 
        data: { disable_with: "Processing..." } %>
    <%= link_to "Cancel", tasks_path, class: "btn btn-outline-secondary ms-2" %>
  </div>
<% end %>